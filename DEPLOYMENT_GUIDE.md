# üöÄ Tattooed World - Render.com Deployment Guide

## ‚úÖ Pre-Deployment Checklist

### 1. **Repository Setup**
- [x] App name updated to "Tattooed World"
- [x] CSS import order fixed (Google Fonts before Tailwind)
- [x] render.yaml updated with new service names
- [x] All environment variables configured
- [x] Database schema ready for production

### 2. **Required Environment Variables**

#### Backend Environment Variables (Set in Render Dashboard)
```bash
# Database (Auto-configured by render.yaml)
DATABASE_URL=postgresql://... (from database service)

# JWT Authentication (Auto-generated)
JWT_SECRET=auto-generated
JWT_EXPIRES_IN=7d

# Server Configuration
NODE_ENV=production
PORT=10000 (Render default)

# CORS Configuration
CORS_ORIGIN=https://tattooed-world-frontend.onrender.com

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Email Configuration (Optional)
SENDGRID_API_KEY=your-sendgrid-key
FROM_EMAIL=noreply@tattooedworld.com
FRONTEND_URL=https://tattooed-world-frontend.onrender.com

# File Upload (Optional)
MAX_FILE_SIZE=5242880
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/webp

# Cloudinary (Optional)
CLOUDINARY_CLOUD_NAME=your-cloud-name
CLOUDINARY_API_KEY=your-api-key
CLOUDINARY_API_SECRET=your-api-secret

# Google Maps (Optional)
GOOGLE_MAPS_API_KEY=your-google-maps-key
```

#### Frontend Environment Variables (Set in Render Dashboard)
```bash
VITE_API_URL=https://tattooed-world-backend.onrender.com
VITE_GOOGLE_MAPS_API_KEY=your-google-maps-key (optional)
VITE_NODE_ENV=production
```

## üöÄ Deployment Steps

### Step 1: Connect Repository to Render
1. Go to [render.com](https://render.com) and sign in
2. Click "New +" ‚Üí "Blueprint"
3. Connect your GitHub repository
4. Render will automatically detect the `render.yaml` file

### Step 2: Configure Services
The `render.yaml` file will automatically create:
- **Backend API**: `tattooed-world-backend`
- **Frontend**: `tattooed-world-frontend`
- **Database**: `tattooed-world-db`

### Step 3: Set Environment Variables
1. Go to each service in Render Dashboard
2. Navigate to "Environment" tab
3. Add the required environment variables listed above
4. **Important**: Set `NODE_ENV=production` for backend

### Step 4: Deploy
1. Render will automatically start building and deploying
2. Monitor the build logs for any issues
3. Wait for all services to be "Live"

## üîß Service Configuration

### Backend Service (`tattooed-world-backend`)
- **Build Command**: `cd backend && npm install && npm run build`
- **Start Command**: `cd backend && npm run start:prod`
- **Plan**: Starter (recommended for production)
- **Health Check**: `/health` endpoint

### Frontend Service (`tattooed-world-frontend`)
- **Build Command**: `cd frontend && npm install && npm run build`
- **Static Publish Path**: `frontend/dist`
- **Plan**: Free (sufficient for static sites)

### Database Service (`tattooed-world-db`)
- **Plan**: Free (for development) / Starter (for production)
- **Auto-backups**: Enabled on paid plans

## üõ†Ô∏è Troubleshooting

### Common Issues

#### 1. **Build Failures**
```bash
# Check if all dependencies are in package.json
npm install --production
```

#### 2. **Database Connection Issues**
```bash
# Verify DATABASE_URL is correct
# Check if database service is running
# Ensure Prisma migrations are applied
```

#### 3. **CORS Errors**
```bash
# Verify CORS_ORIGIN matches frontend URL exactly
# Check if frontend is accessible
```

#### 4. **Rate Limiting Issues**
```bash
# Adjust RATE_LIMIT_MAX_REQUESTS if needed
# Check proxy configuration
```

### Debug Commands
```bash
# Check backend logs
render logs tattooed-world-backend

# Check frontend logs
render logs tattooed-world-frontend

# Check database status
render ps tattooed-world-db
```

## üîí Security Considerations

### Production Security
- [x] JWT_SECRET auto-generated by Render
- [x] Rate limiting enabled
- [x] CORS properly configured
- [x] Helmet.js security headers
- [x] Input validation with express-validator
- [x] SQL injection prevention via Prisma

### Environment Variables
- ‚úÖ Never commit secrets to repository
- ‚úÖ Use Render's environment variable system
- ‚úÖ JWT_SECRET auto-generated
- ‚úÖ Database URL from service binding

## üìä Monitoring

### Health Checks
- **Backend**: `https://tattooed-world-backend.onrender.com/health`
- **Frontend**: `https://tattooed-world-frontend.onrender.com`

### Logs
- Monitor application logs in Render Dashboard
- Set up alerts for service failures
- Monitor database performance

## üîÑ Updates and Maintenance

### Code Updates
1. Push changes to GitHub
2. Render automatically redeploys
3. Monitor build and deployment logs

### Database Migrations
```bash
# Run migrations on production
render run tattooed-world-backend -- npm run db:deploy
```

### Environment Variable Updates
1. Update in Render Dashboard
2. Redeploy service
3. Verify changes take effect

## üéØ Post-Deployment Verification

### 1. **Test All Features**
- [ ] User registration and login
- [ ] Artist profile creation
- [ ] Artist verification (admin)
- [ ] Review system
- [ ] Flash gallery
- [ ] Search and filtering
- [ ] Admin dashboard

### 2. **Performance Check**
- [ ] Page load times
- [ ] API response times
- [ ] Database query performance
- [ ] Image upload functionality

### 3. **Security Verification**
- [ ] HTTPS working
- [ ] CORS properly configured
- [ ] Rate limiting active
- [ ] JWT authentication working

## üìû Support

If you encounter issues:
1. Check Render documentation
2. Review application logs
3. Verify environment variables
4. Test locally first
5. Contact Render support if needed

## üéâ Success!

Once deployed, your Tattooed World app will be available at:
- **Frontend**: `https://tattooed-world-frontend.onrender.com`
- **Backend API**: `https://tattooed-world-backend.onrender.com`
- **Health Check**: `https://tattooed-world-backend.onrender.com/health`

Your app is now live and ready to connect tattoo artists with clients worldwide! üåçüé® 